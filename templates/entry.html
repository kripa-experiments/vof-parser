{% extends 'base.html' %}

{% block body %}

<h1 class="f3 f2-m f1-l">Metonymize VoF Parser</h1>
<h2 class="f5 f4-m f3-l">Map Voice of Fan into actionable records.</h2>
<p class="lh-copy">
  Converts natural language feedback into actionable topic areas and ratings consistent with fan survey data.
</p>
<form class="button-reset input-reset" method='POST' action='/'>
  <div>

    <div onclick="example1()" class="f6 dim br1 ba ph3 pv2 mb2 dib grow pointer black">Example 1</div>
    <div onclick="example2()" class="f6 dim br1 ba ph3 pv2 mb2 dib grow pointer black">Example 2</div>
    <div onclick="example3()" class="f6 dim br1 ba ph3 pv2 mb2 dib grow pointer black">Example 3</div>

    <textarea id="narrative" name="narrative"
              class="db border-box hover-black w-100 measure ba b--black-20 pa2 br2 mb2"
              aria-describedby="comment-desc"
              rows="5"
              placeholder="Share your Fan Voice"
              autocapitalize="sentences" wrap="soft"
              required>{% if the_query %}{{ the_query }}{% endif %}</textarea>

  </div>
  <div class="dib mt2">
    <input class="b ph3 pv2 input-reset ba b--black bg-transparent grow pointer f6" type='submit' value='Submit'>
    <div id="talk" onclick="toggleRecording(event)" class="f6 dim br1 ba ph3 pv2 mb2 dib grow pointer black">Talk</div>
    <div id="timeDisplay" class="dib f6"></div>
  </div>
</form>

{% if the_error %}
<div class="mv3 f5 b dark-red">{{ the_error }}</div>
{% endif %}
{% if the_match %}
<div class="mv3 f5 b">Underlying Issues</div>
<div class="flex flex-wrap">
  {% for label in the_match %}
  <div class="ba br4 pa2 mr2 mv1">{{ label }}</div>
  {% endfor %}
  </ul>
  {% endif %}
  <script>
   var setNarrative = function(s) {
     document.getElementById('narrative').value = s;
   }

   var example1 = function() {
     setNarrative('The parking delayed us by over an hour. The fries made up for this a little. The team win made up for a lot.');
   }

   var example2 = function() {
     setNarrative('The ushers were very helpful in finding our seats. The seats were uncomfortable. The nachos were tasty');
   }

   var example3 = function() {
     setNarrative('Getting through the security line was a slow process. This could be improved. The new jumbotron was fantastic.');
   }
  </script>

  {% endblock %}
